# Enable URL rewriting
RewriteEngine On

# Base rules for clean URLs
RewriteRule ^flights$ index.php [L]
RewriteRule ^flights/$ index.php [L]

# Help endpoint
RewriteRule ^flights/help/?$ api/flights-help.php [QSA,L]

# API endpoints with format specification
RewriteRule ^flights/json/?$ api/flights-json.php [QSA,L]
RewriteRule ^flights/text/?$ api/flights-txt.php [QSA,L]

# Handle specific flight routes with date in URL path
# Format: /flights/json/Berlin/London/2025-11-15/14:30
RewriteRule ^flights/json/([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ api/flights-json.php?start=$1&ziel=$2&date=$3&time=$4 [QSA,L]
RewriteRule ^flights/text/([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ api/flights-txt.php?start=$1&ziel=$2&date=$3&time=$4 [QSA,L]

# Handle specific flight routes with date as query parameter
RewriteRule ^flights/json/([^/]+)/([^/]+)/?$ api/flights-json.php?start=$1&ziel=$2 [QSA,L]
RewriteRule ^flights/text/([^/]+)/([^/]+)/?$ api/flights-txt.php?start=$1&ziel=$2 [QSA,L]

# Fallback for other /flights/ requests
RewriteRule ^flights/(.*)$ index.php [QSA,L]